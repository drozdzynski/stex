<html lang="en">
<head></head>
<body>
  <div class="session"></div>
  <div class="counter"></div>
  <div class="reply"></div>
  <button class="increase"></button>
  <button class="decrease"></button>

  <script src="/static/stex.js"></script>
  <script>
    const session = document.querySelector('.session')
    const counter = document.querySelector('.counter')
    const reply = document.querySelector('.reply')

    const store = new stex({
      store: "StexTest.Store.Counter",
      params: {},
      subscribe: (state) => {
        session.innerHTML = store.session
        counter.innerHTML = state.counter
      }
    })

    document.querySelector('button.increase').addEventListener('click',  () => store.commit('increase'))


    document.querySelector('button.decrease').addEventListener('click', () => {
      store.commit('decrease').then(response => {
        if (response.message !== void 0) {
          reply.innerHTML = response.message
        }
      })
    })
  </script>
</body>
</html>